<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick start for `abess`: Linear regression • abess</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Quick start for `abess`: Linear regression">
<meta property="og:description" content="abess">
<meta property="og:image" content="https://abess-team.github.io/abess/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">abess</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v01-abess-guide.html">Quick start for `abess`: Linear regression</a>
    </li>
    <li>
      <a href="../articles/v03-classification.html">Classification: Logistic Regression and Multinomial Extension</a>
    </li>
    <li>
      <a href="../articles/v04-PoissonGammaReg.html">Positive response: Poisson and Gamma regression</a>
    </li>
    <li>
      <a href="../articles/v05-coxreg.html">Best Subset Selection for Censored Response</a>
    </li>
    <li>
      <a href="../articles/v06-MultiTaskLearning.html">Multi-Response Linear Regression</a>
    </li>
    <li>
      <a href="../articles/v07-advancedFeatures.html">Advanced Features</a>
    </li>
    <li>
      <a href="../articles/v08-sPCA.html">Principal component analysis</a>
    </li>
    <li>
      <a href="../articles/v09-fasterSetting.html">Tips for faster computation</a>
    </li>
    <li>
      <a href="../articles/v10-algorithm.html">ABESS algorithm: details</a>
    </li>
    <li>
      <a href="../articles/v11-power-of-abess.html">Power of abess</a>
    </li>
    <li>
      <a href="../articles/v12-Robust-Principal-Component-Analysis.html">Robust Principal Component Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/abess-team/abess/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v01-abess-guide_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick start for <code>abess</code>: Linear regression</h1>
                        <h4 data-toc-skip class="author">Jin Zhu</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/abess-team/abess/tree/master/R-package/../vignettes/v01-abess-guide.Rmd" class="external-link"><code>../vignettes/v01-abess-guide.Rmd</code></a></small>
      <div class="hidden name"><code>v01-abess-guide.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="brief-introduction">Brief introduction<a class="anchor" aria-label="anchor" href="#brief-introduction"></a>
</h2>
<p>The R package <code>abess</code> implement a polynomial algorithm <a href="https://www.pnas.org/doi/10.1073/pnas.2014241117" class="external-link"></a> for solving the best-subset selection problem: <span class="math display">\[\min_{\boldsymbol{\beta} \in \mathbb{R}^p} \mathcal{L_n}({\boldsymbol\beta}), \text{ s.t. } \|\boldsymbol\beta\|_0 \leq s,\]</span> where <span class="math inline">\(\mathcal{L}_{n}(\boldsymbol \beta)=\frac{1}{2 n}\|y-X \boldsymbol{\beta}\|_{2}^{2}\)</span>, <span class="math inline">\(\|\boldsymbol{\beta}\|_0=\sum_{i=1}^pI( \boldsymbol{\beta}_i\neq 0)\)</span> is the <span class="math inline">\(\ell_0\)</span>(-pseudo) norm of <span class="math inline">\(\beta\)</span>, and the sparsity level <span class="math inline">\(s\)</span> is usually an unknown non-negative integer. Next, we present an example to show how to use the <code>abess</code> package to solve a simple problem.</p>
</div>
<div class="section level2">
<h2 id="quick-example">Quick example<a class="anchor" aria-label="anchor" href="#quick-example"></a>
</h2>
<div class="section level3">
<h3 id="fixed-support-size-best-subset-selection">Fixed support size best subset selection<a class="anchor" aria-label="anchor" href="#fixed-support-size-best-subset-selection"></a>
</h3>
<p>We generate a design matrix <span class="math inline">\(X\)</span> containing 300 observations and each observation has 1000 predictors. The response variable <span class="math inline">\(y\)</span> is linearly related to the first, second, and fifth predictors in <span class="math inline">\(X\)</span>: <span class="math display">\[y = 3X_1 + 1.5X_2 + 2X_5 + \epsilon,\]</span> where <span class="math inline">\(\varepsilon\)</span> is a standard normal random variable.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/abess-team/abess" class="external-link">abess</a></span><span class="op">)</span></span>
<span><span class="va">synthetic_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate.data.html">generate.data</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">300</span>, p <span class="op">=</span> <span class="fl">1000</span>, </span>
<span>                                beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1.5</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">995</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">synthetic_data</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]  300 1000</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">synthetic_data</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##           [,1]</span></span>
<span><span class="co">## [1,] -4.063922</span></span>
<span><span class="co">## [2,]  3.855246</span></span>
<span><span class="co">## [3,] -3.041391</span></span>
<span><span class="co">## [4,] -1.081257</span></span>
<span><span class="co">## [5,]  4.986772</span></span>
<span><span class="co">## [6,]  4.470901</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind.data.frame</a></span><span class="op">(</span><span class="st">"y"</span> <span class="op">=</span> <span class="va">synthetic_data</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                        <span class="va">synthetic_data</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Then, we use the main function <code>abess</code> in the package to fit this dataset. By setting the arguments <code>support.size = s</code>, <code><a href="../reference/abess.html">abess()</a></code> function conducts <strong>Algorithm 1</strong> <a href="https://www.pnas.org/doi/10.1073/pnas.2014241117" class="external-link"></a> for the best-subset selection with a sparsity level <code>s</code>. In our example, we set the options: <code>support.size = 3</code>, and we run <strong>Algorithm 1</strong> with the following command:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abess_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abess.html">abess</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">dat</span>, support.size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>The output of <code>abess</code> comprises the selected best model:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">abess_fit</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                       3</span></span>
<span><span class="co">## (intercept) -0.01802179</span></span>
<span><span class="co">## x1           2.96418205</span></span>
<span><span class="co">## x2           1.45090693</span></span>
<span><span class="co">## x3           0.00000000</span></span>
<span><span class="co">## x4           0.00000000</span></span>
<span><span class="co">## x5           1.90592036</span></span></code></pre>
<p>The support set of the best model is identical to the ground truth, and the coefficient estimation is the same as the oracle estimator given by <code>lm</code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = y ~ ., data = dat[, c(1, c(1, 2, 5) + 1)])</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## (Intercept)           x1           x2           x5  </span></span>
<span><span class="co">##    -0.01802      2.96418      1.45091      1.90592</span></span></code></pre>
<!-- Users could `print`, `summary` or `predict` this bestmodel object just like working with classical regression modeling. This would be helpful for data scientists who are familiar with `lm` functions in R. -->
</div>
<div class="section level3">
<h3 id="adaptive-best-subset-selection">Adaptive best subset selection<a class="anchor" aria-label="anchor" href="#adaptive-best-subset-selection"></a>
</h3>
<p>Supposing we are unknown about the true sparsity level in real world data, and thus, we need to determine the most proper one. The <strong>Algorithm 3</strong> <a href="https://www.pnas.org/doi/10.1073/pnas.2014241117" class="external-link"></a> is designed for this scenario. <code>abess</code> is capable of performing this algorithm:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abess_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abess.html">abess</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<p>The output of <code><a href="../reference/abess.html">abess()</a></code> also comprises the selected best model:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_size</span> <span class="op">&lt;-</span> <span class="va">abess_fit</span><span class="op">[[</span><span class="st">"best.size"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">best_size</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">abess_fit</span>, support.size <span class="op">=</span> <span class="va">best_size</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                       3</span></span>
<span><span class="co">## (intercept) -0.01802179</span></span>
<span><span class="co">## x1           2.96418205</span></span>
<span><span class="co">## x2           1.45090693</span></span>
<span><span class="co">## x3           0.00000000</span></span>
<span><span class="co">## x4           0.00000000</span></span>
<span><span class="co">## x5           1.90592036</span></span></code></pre>
<p>The output model accurately detect the true model size, which implies the <strong>Algorithm 3</strong> efficiently find both the optimal sparsity level and true effective predictors.</p>
</div>
</div>
<div class="section level2">
<h2 id="real-data-example">Real data example<a class="anchor" aria-label="anchor" href="#real-data-example"></a>
</h2>
<div class="section level3">
<h3 id="hitters-dataset">Hitters Dataset<a class="anchor" aria-label="anchor" href="#hitters-dataset"></a>
</h3>
<p>In this tutorial, we are going to demonstrate how to use the <code>abess</code> package to carry out best subset selection on the <code>Hitters</code> dataset. We hope to use several predictors related to the performance of the baseball athletes last year to predict their salary. First, let’s have a look at this dataset. There are 19 variables except <code>Salary</code> and 322 observations.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hitters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Hitters.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   AtBat Hits HmRun Runs RBI Walks Years CAtBat CHits CHmRun CRuns CRBI CWalks</span></span>
<span><span class="co">## 1   293   66     1   30  29    14     1    293    66      1    30   29     14</span></span>
<span><span class="co">## 2   315   81     7   24  38    39    14   3449   835     69   321  414    375</span></span>
<span><span class="co">## 3   479  130    18   66  72    76     3   1624   457     63   224  266    263</span></span>
<span><span class="co">## 4   496  141    20   65  78    37    11   5628  1575    225   828  838    354</span></span>
<span><span class="co">## 5   321   87    10   39  42    30     2    396   101     12    48   46     33</span></span>
<span><span class="co">## 6   594  169     4   74  51    35    11   4408  1133     19   501  336    194</span></span>
<span><span class="co">##   League Division PutOuts Assists Errors Salary NewLeague</span></span>
<span><span class="co">## 1      A        E     446      33     20     NA         A</span></span>
<span><span class="co">## 2      N        W     632      43     10  475.0         N</span></span>
<span><span class="co">## 3      A        W     880      82     14  480.0         A</span></span>
<span><span class="co">## 4      N        E     200      11      3  500.0         N</span></span>
<span><span class="co">## 5      N        E     805      40      4   91.5         N</span></span>
<span><span class="co">## 6      A        W     282     421     25  750.0         A</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 322  20</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 59</span></span></code></pre>
<p>Note that this dataset contains some missing data. So we use the <code><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit()</a></code> function to delete rows that have incomplete information. After that, we have 263 observations remaining.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hitters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 263  20</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0</span></span></code></pre>
<p>Then we change the factors into dummy variables with the <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code> function. Note that the <code><a href="../reference/abess.html">abess()</a></code> function will automatically include the intercept.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hitters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></span><span class="op">(</span><span class="op">~</span><span class="va">.</span>, <span class="va">Hitters</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">Hitters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-abess">Running ABESS<a class="anchor" aria-label="anchor" href="#running-abess"></a>
</h3>
<p>The <code><a href="../reference/abess.html">abess()</a></code> function in the <code>abess</code> package allows you to perform best subset selection in a highly efficient way. You can call the <code><a href="../reference/abess.html">abess()</a></code> function using formula just like what you do with <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>. Or you can specify the design matrix <code>x</code> and the response <code>y</code>. The <code><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time()</a></code> function records the run time.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/abess-team/abess" class="external-link">abess</a></span><span class="op">)</span></span>
<span><span class="va">abess_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abess.html">abess</a></span><span class="op">(</span><span class="va">Salary</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">Hitters</span><span class="op">)</span></span>
<span><span class="va">abess_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abess.html">abess</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span> <span class="op">==</span> <span class="st">"Salary"</span><span class="op">)</span><span class="op">]</span>, <span class="va">Hitters</span><span class="op">$</span><span class="va">Salary</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "abess"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="interpret-the-result">Interpret the Result<a class="anchor" aria-label="anchor" href="#interpret-the-result"></a>
</h3>
<p>After get the estimator, we can further do more exploring work. The output of <code><a href="../reference/abess.html">abess()</a></code> function contains the best model for all the candidate support size in the <code>support.size</code>. You can use some generic function to quickly draw some information of those estimators.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># draw the estimated coefficients on all candidate support size</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 20 x 20 sparse Matrix of class "dgCMatrix"</span></span>
<span><span class="co">##                                                                      </span></span>
<span><span class="co">## (intercept) 535.9259 274.5803864 -47.9559022 -71.4592204   13.9231044</span></span>
<span><span class="co">## AtBat         .        .           .           .            .        </span></span>
<span><span class="co">## Hits          .        .           3.3008446   2.8038162    2.6757978</span></span>
<span><span class="co">## HmRun         .        .           .           .            .        </span></span>
<span><span class="co">## Runs          .        .           .           .            .        </span></span>
<span><span class="co">## RBI           .        .           .           .            .        </span></span>
<span><span class="co">## Walks         .        .           .           .            .        </span></span>
<span><span class="co">## Years         .        .           .           .            .        </span></span>
<span><span class="co">## CAtBat        .        .           .           .            .        </span></span>
<span><span class="co">## CHits         .        .           .           .            .        </span></span>
<span><span class="co">## CHmRun        .        .           .           .            .        </span></span>
<span><span class="co">## CRuns         .        .           .           .            .        </span></span>
<span><span class="co">## CRBI          .        0.7909536   0.6898994   0.6825275    0.6817790</span></span>
<span><span class="co">## CWalks        .        .           .           .            .        </span></span>
<span><span class="co">## LeagueN       .        .           .           .            .        </span></span>
<span><span class="co">## DivisionW     .        .           .           .         -139.9538855</span></span>
<span><span class="co">## PutOuts       .        .           .           0.2735814    0.2735002</span></span>
<span><span class="co">## Assists       .        .           .           .            .        </span></span>
<span><span class="co">## Errors        .        .           .           .            .        </span></span>
<span><span class="co">## NewLeagueN    .        .           .           .            .        </span></span>
<span><span class="co">##                                                                             </span></span>
<span><span class="co">## (intercept)   -7.6563819   91.5117981   67.9431538  114.5067227  197.6616396</span></span>
<span><span class="co">## AtBat          .           -1.8685892   -1.8535176   -2.1250564   -2.0803280</span></span>
<span><span class="co">## Hits           2.0467293    7.6043976    7.6348879    7.6482495    6.8263359</span></span>
<span><span class="co">## HmRun          .            .            .            .            .        </span></span>
<span><span class="co">## Runs           .            .            .            .            .        </span></span>
<span><span class="co">## RBI            .            .            .            .            .        </span></span>
<span><span class="co">## Walks          2.5574106    3.6976468    3.6644212    5.2391412    5.9761215</span></span>
<span><span class="co">## Years          .            .            .            .          -15.9414459</span></span>
<span><span class="co">## CAtBat         .            .            .            .            .        </span></span>
<span><span class="co">## CHits          .            .            .            .            .        </span></span>
<span><span class="co">## CHmRun         .            .            .            .            .        </span></span>
<span><span class="co">## CRuns          .            .            .            .            0.8143029</span></span>
<span><span class="co">## CRBI           0.6492007    0.6430169    0.6445474    0.8959228    0.6000624</span></span>
<span><span class="co">## CWalks         .            .            .           -0.3487728   -0.7503761</span></span>
<span><span class="co">## LeagueN        .            .           35.0926551    .            .        </span></span>
<span><span class="co">## DivisionW   -137.3676333 -122.9515338 -122.5437635 -126.8503150 -123.4936780</span></span>
<span><span class="co">## PutOuts        0.2518721    0.2643076    0.2584749    0.2655057    0.2702288</span></span>
<span><span class="co">## Assists        .            .            .            0.1790809    .        </span></span>
<span><span class="co">## Errors         .            .            .            .            .        </span></span>
<span><span class="co">## NewLeagueN     .            .            .            .            .        </span></span>
<span><span class="co">##                                                                             </span></span>
<span><span class="co">## (intercept)  206.5672285  218.5527334  198.4967427  142.9090129  144.6793182</span></span>
<span><span class="co">## AtBat         -2.2556858   -2.2102483   -2.1783358   -2.0120568   -2.0883279</span></span>
<span><span class="co">## Hits           7.0378766    6.9279436    6.9273744    7.3751935    7.6436454</span></span>
<span><span class="co">## HmRun          .            .            .            .            2.3406524</span></span>
<span><span class="co">## Runs           .            .            .           -1.7130320   -2.3580478</span></span>
<span><span class="co">## RBI            .            .            .            .            .        </span></span>
<span><span class="co">## Walks          6.2793246    6.2243570    6.1667822    5.9906173    6.1794713</span></span>
<span><span class="co">## Years        -16.7414858  -17.2542087  -17.0664017    .            .        </span></span>
<span><span class="co">## CAtBat         .            .            .           -0.1527096   -0.1488074</span></span>
<span><span class="co">## CHits          .            .            .            .            .        </span></span>
<span><span class="co">## CHmRun         .            .            .            .            .        </span></span>
<span><span class="co">## CRuns          0.8132079    0.8111144    0.8082476    1.5535444    1.5931621</span></span>
<span><span class="co">## CRBI           0.6508515    0.6594949    0.6571221    0.7850103    0.7170767</span></span>
<span><span class="co">## CWalks        -0.7882990   -0.7934064   -0.7898841   -0.8404419   -0.8565844</span></span>
<span><span class="co">## LeagueN        .            .           29.1474123   41.9165343   44.2352269</span></span>
<span><span class="co">## DivisionW   -123.2261893 -123.1231837 -122.8009102 -112.3809790 -112.8079905</span></span>
<span><span class="co">## PutOuts        0.2824819    0.2883338    0.2830813    0.2896964    0.2876182</span></span>
<span><span class="co">## Assists        0.1872292    0.2795390    0.2732454    0.3312276    0.3677311</span></span>
<span><span class="co">## Errors         .           -3.0198567   -3.3107203   -2.8685826   -3.1271251</span></span>
<span><span class="co">## NewLeagueN     .            .            .            .            .        </span></span>
<span><span class="co">##                                                                             </span></span>
<span><span class="co">## (intercept)  163.3275824  163.0064063  162.9932027  163.1632541  163.1035878</span></span>
<span><span class="co">## AtBat         -2.1085651   -2.0890552   -2.0302709   -2.0186239   -1.9798729</span></span>
<span><span class="co">## Hits           7.6501026    7.8848050    7.7483580    7.7381465    7.5007675</span></span>
<span><span class="co">## HmRun          2.3654025    3.8223369    4.6470956    4.6127592    4.3308829</span></span>
<span><span class="co">## Runs          -2.3535049   -2.5377954   -2.5882384   -2.6272166   -2.3762100</span></span>
<span><span class="co">## RBI            .           -0.8815425   -1.1165187   -1.1190038   -1.0449620</span></span>
<span><span class="co">## Walks          6.1730276    6.2941910    6.2778803    6.3108843    6.2312863</span></span>
<span><span class="co">## Years         -4.2321550   -4.0947594   -3.7490950   -3.8738277   -3.4890543</span></span>
<span><span class="co">## CAtBat        -0.1341737   -0.1350897   -0.1526121   -0.1514014   -0.1713405</span></span>
<span><span class="co">## CHits          .            .            .            .            0.1339910</span></span>
<span><span class="co">## CHmRun         .            .           -0.3876922   -0.3938397   -0.1728611</span></span>
<span><span class="co">## CRuns          1.5426322    1.5321626    1.5730263    1.5708067    1.4543049</span></span>
<span><span class="co">## CRBI           0.7144063    0.7420886    0.8965235    0.8961782    0.8077088</span></span>
<span><span class="co">## CWalks        -0.8446970   -0.8559654   -0.8423839   -0.8467366   -0.8115709</span></span>
<span><span class="co">## LeagueN       42.2835360   42.2286763   41.6482699   61.3012822   62.5994230</span></span>
<span><span class="co">## DivisionW   -113.9853363 -116.0422926 -116.4111439 -116.5862127 -116.8492456</span></span>
<span><span class="co">## PutOuts        0.2859836    0.2858651    0.2827595    0.2829156    0.2818925</span></span>
<span><span class="co">## Assists        0.3643305    0.3641325    0.3661464    0.3640952    0.3710692</span></span>
<span><span class="co">## Errors        -3.2379385   -3.1409199   -3.1840695   -3.2558249   -3.3607605</span></span>
<span><span class="co">## NewLeagueN     .            .            .          -22.9788245  -24.7623251</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the deviance of the estimated model on all candidate support size</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/deviance.html" class="external-link">deviance</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 101367.13  68782.66  58263.42  55607.03  53176.52  52241.95  49800.20</span></span>
<span><span class="co">##  [8]  49651.96  49079.30  47327.31  47040.89  46947.37  46847.92  46177.09</span></span>
<span><span class="co">## [15]  46100.11  46077.34  46053.29  46032.63  46016.41  46008.93</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print the fitted model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Call:</span></span>
<span><span class="co">## abess.default(x = Hitters[, -which(colnames(Hitters) == "Salary")], </span></span>
<span><span class="co">##     y = Hitters$Salary)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    support.size       dev      GIC</span></span>
<span><span class="co">## 1             0 101367.13 3031.471</span></span>
<span><span class="co">## 2             1  68782.66 2934.538</span></span>
<span><span class="co">## 3             2  58263.42 2895.944</span></span>
<span><span class="co">## 4             3  55607.03 2888.729</span></span>
<span><span class="co">## 5             4  53176.52 2882.033</span></span>
<span><span class="co">## 6             5  52241.95 2882.427</span></span>
<span><span class="co">## 7             6  49800.20 2874.896</span></span>
<span><span class="co">## 8             7  49651.96 2879.170</span></span>
<span><span class="co">## 9             8  49079.30 2881.177</span></span>
<span><span class="co">## 10            9  47327.31 2876.675</span></span>
<span><span class="co">## 11           10  47040.89 2880.136</span></span>
<span><span class="co">## 12           11  46947.37 2884.671</span></span>
<span><span class="co">## 13           12  46847.92 2889.171</span></span>
<span><span class="co">## 14           13  46177.09 2890.436</span></span>
<span><span class="co">## 15           14  46100.11 2895.055</span></span>
<span><span class="co">## 16           15  46077.34 2899.983</span></span>
<span><span class="co">## 17           16  46053.29 2904.903</span></span>
<span><span class="co">## 18           17  46032.63 2909.843</span></span>
<span><span class="co">## 19           18  46016.41 2914.808</span></span>
<span><span class="co">## 20           19  46008.93 2919.824</span></span></code></pre>
<p>Prediction is allowed for all the estimated models. Just call <code><a href="../reference/predict.abess.html">predict.abess()</a></code> function with the <code>support.size</code> set to the size of model you are interested in. If <code>support.size</code> is not provided, prediction will be made on the model with best tuning value.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hitters_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">abess_fit</span>, </span>
<span>                        newx <span class="op">=</span> <span class="va">Hitters</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Hitters</span><span class="op">)</span> <span class="op">==</span> <span class="st">"Salary"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                        support.size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hitters_pred</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##           3         4</span></span>
<span><span class="co">## 2 611.11976  545.8175</span></span>
<span><span class="co">## 3 715.34087  643.8563</span></span>
<span><span class="co">## 4 950.55323 1017.2414</span></span>
<span><span class="co">## 5 424.10211  498.2470</span></span>
<span><span class="co">## 6 708.86493  632.3839</span></span>
<span><span class="co">## 7  59.21692  139.8497</span></span></code></pre>
<p>The <code><a href="../reference/plot.abess.html">plot.abess()</a></code> function helps to visualize the change of models with the change of support size. There are 5 types of graph you can generate, including <code>coef</code> for the coefficient value, <code>l2norm</code> for the L2-norm of the coefficients, <code>dev</code> for the deviance and <code>tune</code> for the tuning value. Default if <code>coef</code>.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">abess_fit</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01-abess-guide_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>The graph shows that, beginning from the most dense model, the 15th variable (Division, A factor with levels E and W indicating player’s division at the end of 1986) is included in the active set until the support size reaches 3.</p>
<p>We can also generate a graph about the tuning value. Remember that we used the default GIC to tune the support size.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">abess_fit</span>, type <span class="op">=</span> <span class="st">"tune"</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01-abess-guide_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>The tuning value reaches the lowest point at 6. And We might choose the estimated model with support size equals 6 as our final model. In fact, the tuning values of different model sizes are provided in <code>tune.value</code> of the <code>abess</code> object. You can get the best model size through the following call.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract.abess.html">extract</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span><span class="op">[[</span><span class="st">"support.size"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 6</span></span></code></pre>
<p>To extract any model from the <code>abess</code> object, we can call the <code><a href="../reference/extract.abess.html">extract()</a></code> function with a given <code>support.size</code>. If <code>support.size</code> is not provided, the model with the best tuning value will be returned. Here we extract the model with support size equals 6.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract.abess.html">extract</a></span><span class="op">(</span><span class="va">abess_fit</span>, support.size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">best.model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 7</span></span>
<span><span class="co">##  $ beta        :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots</span></span>
<span><span class="co">##   .. ..@ i       : int [1:6] 0 1 5 11 14 15</span></span>
<span><span class="co">##   .. ..@ p       : int [1:2] 0 6</span></span>
<span><span class="co">##   .. ..@ Dim     : int [1:2] 19 1</span></span>
<span><span class="co">##   .. ..@ Dimnames:List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr [1:19] "AtBat" "Hits" "HmRun" "Runs" ...</span></span>
<span><span class="co">##   .. .. ..$ : chr "6"</span></span>
<span><span class="co">##   .. ..@ x       : num [1:6] -1.869 7.604 3.698 0.643 -122.952 ...</span></span>
<span><span class="co">##   .. ..@ factors : list()</span></span>
<span><span class="co">##  $ intercept   : num 91.5</span></span>
<span><span class="co">##  $ support.size: num 6</span></span>
<span><span class="co">##  $ support.vars: chr [1:6] "AtBat" "Hits" "Walks" "CRBI" ...</span></span>
<span><span class="co">##  $ support.beta: num [1:6] -1.869 7.604 3.698 0.643 -122.952 ...</span></span>
<span><span class="co">##  $ dev         : num 49800</span></span>
<span><span class="co">##  $ tune.value  : num 2875</span></span></code></pre>
<p>The return is a list containing the basic information of the estimated model.</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-features">Advanced features<a class="anchor" aria-label="anchor" href="#advanced-features"></a>
</h2>
<div class="section level3">
<h3 id="feature-screening-for-ultra-high-dimensional-dataset">Feature screening for ultra-high dimensional dataset<a class="anchor" aria-label="anchor" href="#feature-screening-for-ultra-high-dimensional-dataset"></a>
</h3>
<p>The <a href="https://archive.ics.uci.edu/ml/datasets/communities+and+crime" class="external-link"></a> consists of 18 variables about crime from the 1995 FBI UCR (e.g., per capita arson crimes and per capita violent crimes), communities information in the U.S. (e.g., the percent of the population considered urban), socio-economic data from the 90s census (e.g., the median family income), and law enforcement data from the 1990 law enforcement management and admin stats survey (e.g., per capita number of police officers). It would be appropriate if any of the crime state in community can be modeled by the basic community information, socio-economic and law enforcement state in community. Here, without the loss of generality, per capita violent crimes is chosen as the response variable, and 102 numerical variables as well as their pairwise interactions is considered as predictors. <!-- Note that, the numerical variables with at least 50\% percentages missing observations are excluded,  --> <!-- and 200 observations without missing records are randomly picked out from the pool.  --> The pre-processed dataset for statistical modeling has 200 observations and 5253 predictors, and the code for pre-processing are openly shared in <a href="https://github.com/abess-team/abess/blob/master/R-package/data-raw/DATASET_VIGNETTES.R" class="external-link"></a>.<br>
The pre-processed dataset can be freely downloaded by running:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">working_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">"crime.rda"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"crime.rda"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">crime_data_url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abess-team/abess/raw/master/R-package/data-raw/crime.rda"</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">crime_data_url</span>, <span class="st">"crime.rda"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working_directory</span>, <span class="st">"crime.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>As mentioned before, this dataset comprises 5000+ features, much larger than the number of observations:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">crime</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]  500 5254</span></span></code></pre>
<p>And thus, it would be better to first perform feature screening, which is also supported by the <code>abess</code> function. Suppose we are interested in retaining 1000 variables with the largest marginal utility, then we can conduct the command:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abess_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abess.html">abess</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">crime</span>, screening.num <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 14</span></span>
<span><span class="co">##  $ beta          :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots</span></span>
<span><span class="co">##   .. ..@ i       : int [1:528] 442 442 1196 374 442 1196 374 442 1003 1196 ...</span></span>
<span><span class="co">##   .. ..@ p       : int [1:34] 0 0 1 3 6 10 15 21 28 36 ...</span></span>
<span><span class="co">##   .. ..@ Dim     : int [1:2] 5253 33</span></span>
<span><span class="co">##   .. ..@ Dimnames:List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr [1:5253] "pop" "perHoush" "pctBlack" "pctWhite" ...</span></span>
<span><span class="co">##   .. .. ..$ : chr [1:33] "0" "1" "2" "3" ...</span></span>
<span><span class="co">##   .. ..@ x       : num [1:528] -0.251 -0.196 0.496 0.812 -0.173 ...</span></span>
<span><span class="co">##   .. ..@ factors : list()</span></span>
<span><span class="co">##  $ intercept     : num [1:33] 599 2115 1668 1518 1189 ...</span></span>
<span><span class="co">##  $ dev           : num [1:33] 190932 86423 80306 75780 72033 ...</span></span>
<span><span class="co">##  $ tune.value    : num [1:33] 6080 5696 5672 5656 5643 ...</span></span>
<span><span class="co">##  $ nobs          : int 500</span></span>
<span><span class="co">##  $ nvars         : int 5253</span></span>
<span><span class="co">##  $ family        : chr "gaussian"</span></span>
<span><span class="co">##  $ tune.path     : chr "sequence"</span></span>
<span><span class="co">##  $ tune.type     : chr "GIC"</span></span>
<span><span class="co">##  $ support.size  : int [1:33] 0 1 2 3 4 5 6 7 8 9 ...</span></span>
<span><span class="co">##  $ edf           : num [1:33] 0 1 2 3 4 5 6 7 8 9 ...</span></span>
<span><span class="co">##  $ best.size     : int 8</span></span>
<span><span class="co">##  $ screening.vars: chr [1:1000] "pctBlack" "pctWhite" "medIncome" "pctWdiv" ...</span></span>
<span><span class="co">##  $ call          : language abess.formula(formula = y ~ ., data = crime, screening.num = 1000)</span></span>
<span><span class="co">##  - attr(*, "class")= chr "abess"</span></span></code></pre>
<p>The returned object of <code>abess</code> includes the features selected by screening. We exhibit six variables of them:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">[[</span><span class="st">"screening.vars"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "pctBlack"     "pctWhite"     "medIncome"    "pctWdiv"      "pctPubAsst"  </span></span>
<span><span class="co">## [6] "medFamIncome"</span></span></code></pre>
<p>Then, by the generic <code>extract</code> function, we can obtain the best model detected by <code>ABESS</code> algorithm, and get the variables in the best model:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract.abess.html">extract</a></span><span class="op">(</span><span class="va">abess_fit</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">best_model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 7</span></span>
<span><span class="co">##  $ beta        :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots</span></span>
<span><span class="co">##   .. ..@ i       : int [1:8] 303 374 1003 1196 1530 1746 2378 3266</span></span>
<span><span class="co">##   .. ..@ p       : int [1:2] 0 8</span></span>
<span><span class="co">##   .. ..@ Dim     : int [1:2] 5253 1</span></span>
<span><span class="co">##   .. ..@ Dimnames:List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr [1:5253] "pop" "perHoush" "pctBlack" "pctWhite" ...</span></span>
<span><span class="co">##   .. .. ..$ : chr "8"</span></span>
<span><span class="co">##   .. ..@ x       : num [1:8] 0.192 1.071 1.867 0.301 -0.152 ...</span></span>
<span><span class="co">##   .. ..@ factors : list()</span></span>
<span><span class="co">##  $ intercept   : num -55.8</span></span>
<span><span class="co">##  $ support.size: int 8</span></span>
<span><span class="co">##  $ support.vars: chr [1:8] "pctBlack:pctWhite" "pctBlack:pctVacantBoarded" "pct65up:pctMaleDivorc" "pctUrban:pctKidsBornNevrMarr" ...</span></span>
<span><span class="co">##  $ support.beta: num [1:8] 0.192 1.071 1.867 0.301 -0.152 ...</span></span>
<span><span class="co">##  $ dev         : num 61304</span></span>
<span><span class="co">##  $ tune.value  : num 5613</span></span></code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_vars</span> <span class="op">&lt;-</span> <span class="va">best_model</span><span class="op">[[</span><span class="st">"support.vars"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">best_vars</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "pctBlack:pctWhite"             "pctBlack:pctVacantBoarded"    </span></span>
<span><span class="co">## [3] "pct65up:pctMaleDivorc"         "pctUrban:pctKidsBornNevrMarr" </span></span>
<span><span class="co">## [5] "pctWdiv:pctEmployMfg"          "pctPubAsst:ownHousUperQ"      </span></span>
<span><span class="co">## [7] "otherPerCap:pctHousWOphone"    "pctMaleDivorc:pctPopDenseHous"</span></span></code></pre>
<!-- From the linear model based on the selected features, we see that the two predictors,  -->
<!-- 'pctMaleDivorc:pctKidsBornNevrMarr'  -->
<!-- (i.e., the linear interaction between the percentage of divorced males and the percentage of kids born to never married)  -->
<!-- and 'pct65up:pctPopDenseHous'  -->
<!-- (i.e., the linear interaction between the percentage of population that is 65 at least in age and the percent of persons in dense housing that have more than 1 person per room), have the most significant impact on the response:  -->
<!-- We visualize the relationship between the response and the  -->
<!-- two most significant -->
<!-- selected predictors: -->
<!-- ![](./crime.jpg) -->
</div>
<div class="section level3">
<h3 id="more-features">More features<a class="anchor" aria-label="anchor" href="#more-features"></a>
</h3>
<p>There are plenty features provided by <code>abess</code> packages such as logistic regression and group selection. Please the other articles in our website for more details.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jin Zhu, Liyuan Hu, Junhao Huang, Kangkang Jiang, Yanhang Zhang, Zezhi Wang, Borui Tang, Shiyun Lin, Junxian Zhu, Canhong Wen, Heping Zhang, Xueqin Wang.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'd32715b0e35635336aba6377dd751e21',
    indexName: 'abess',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
